<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pure Standalone | React4xp Starter</title>
    <link rel="icon"
          type="image/svg"
          data-th-href="${portal.assetUrl({'_path=react4xp/react4xp.svg'})}">
    <style>
        * {
            font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif;
        }
    </style>

    <!-- OPTION 1: You can get React and ReactDOM from CDN like this, if you want to skip the react4xp-runtime-externals step in build.gradle: -->
        <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>

    <!-- OPTION 2: React and ReactDOM are also available as a chunk from this service (if the react4xp-build-externals step is included in build.gradle):
    <script data-th-src="${portal.serviceUrl({'_service=react4xp-externals'})}"></script> -->

    <!-- This is needed either way: -->
    <script data-th-src="${portal.serviceUrl({'_service=react4xp-client'})}"></script>

</head>
<body>
    <div>
        <img type="image/svg"
             data-th-src="${portal.assetUrl({'_path=react4xp/react4xp.svg'})}"
             height="80"
             width="60">
        <h1>React4xp Starter: Standalone HTML</h1>
    </div>
    <p><strong>Completely standalone client-side rendering</strong></p>
    <p>No data inserted from the controller, the client only uses the source HTML document and React4xp services.</p>
    <p>Here goes:</p>

    <div id="simple_target"></div>
    <div id="complex_target"></div>

    <a href="?">Back to the controlled version...</a>

    <!-- Sets a global variable used by React4xp.CLIENT.renderWithDependencies below - the root path to the used services. Can be set anywhere before renderWithDependencies is called: -->
    <script data-th-text="|var SERVICE_URL_ROOT=`${portal.serviceUrl({'_service='})}`;|"></script>

    <!-- Actual rendering call: -->
    <script>
            React4xp.CLIENT.renderWithDependencies(
                {
                    SimpleGreeter: {
                        targetId: 'simple_target',
                        props: { greetee: "world"}
                    },

                    'site/parts/complex/complex': {
                        targetId: 'complex_target',
                        props: { greeting: "Click me", greetee: "world" },
                    },
                },

                // Demo callback:
                function() { console.log("This is inserted and called after rendering the SimpleGreeter."); }

                // Instead of setting the global variable SERVICE_URL_ROOT like above, the service root path can also be inserted as a third renderWithDependencies argument here, like so:
                // ,"${portal.serviceUrl({'_service='})}"
            );
    </script>

    </body>
</html>
